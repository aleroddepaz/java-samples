<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Hello, JSF!</title>
    <meta charset="utf-8" />
    <link rel="shortcut icon" href="#{request.contextPath}/favicon.ico" />
</h:head>
<h:body>
    <f:metadata>
        <f:event type="preRenderView" listener="#{categoriesCtrl.loadCategories}" />
    </f:metadata>
    <h:form>
        <p:panel header="New category" toggleable="true">
            <h:panelGrid columns="2" cellpadding="5">
                <p:outputLabel for="name" value="Name:" style="font-weight:bold" />
                <p:inputText id="name" value="#{categoriesCtrl.newCategory.name}" />

                <p:outputLabel for="description" value="Description:" style="font-weight:bold" />
                <p:inputTextarea id="description" value="#{categoriesCtrl.newCategory.description}"
                    required="false" />

                <p:commandButton value="Submit" action="#{categoriesCtrl.create}" ajax="false" />
            </h:panelGrid>
        </p:panel>
    </h:form>

    <p:dataTable id="categories" var="category" value="#{categoriesCtrl.categories}">
        <p:column headerText="ID" width="15%">
            <h:outputText value="#{category.id}" />
        </p:column>
        <p:column headerText="Name" width="20%">
            <h:outputText value="#{category.name}" />
        </p:column>
        <p:column headerText="Description" width="50%">
            <h:outputText value="#{category.description}" />
        </p:column>
        <p:column headerText="Created at" width="15%">
            <h:outputText value="#{category.creationDate}">
                <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss"/>
            </h:outputText>
        </p:column>
    </p:dataTable>
</h:body>
</html>